<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

        <title >lCmd Samples</title>
        <script type="text/javascript" src="lcmd.js">
        </script>
        <link rel="stylesheet" type="text/css" href="lcmd.css">
    </head>

    <body>
        <div id="listingParsingErrorBox">
            糟糕！无法解读服务器所发送的数据。<a href="LOCATION">原始列表</a>。
        </div>

        <h1 id="header">LOCATION 的索引</h1>

        <div id="parentDirLinkBox" style="display:none">
            <a id="parentDirLink" class="icon up">
                <span id="parentDirText">[上级目录]</span>
            </a>
        </div>

        <table border="0">
            <thead>
                <tr class="header" id="theader">
                    <th id="nameColumnHeader" tabindex=0 role="button">名称</th>
                    <th id="sizeColumnHeader" class="detailsColumn" tabindex=0 role="button">
                        大小
                    </th>
                    <th id="dateColumnHeader" class="detailsColumn" tabindex=0 role="button" colspan="3">
                        修改日期
                    </th>
                </tr>
                <p/>
                <div id="myDiv">
                </div>
            </thead>
            <tbody id="tbody">
            </tbody>
        </table>
    </body>
    <script>
        start("/");
        onHasParentDirectory();
        function httpGet(theUrl)
        {
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.open( "GET", "lcmd:///bin/bash?cmdfilter=delimiter('%20');array()&cmdline=ls%20-l%20/", true);
            xmlHttp.onreadystatechange=function()
            {
                if (xmlHttp.readyState==4 && xmlHttp.status==200)
                {
                    var responseText = xmlHttp.responseText;
                    var obj = JSON.parse(responseText);
                    if (obj.statusCode == 200)
                    {
                        for (var i=0; i < obj.lines.length; i++)
                        {
                            var line = obj.lines[i];
                            if (line.length <= 2)
                            {
                                continue;
                            }
                            var type = line[0].charAt(0)=='d' ? 1 : 0;
                            addRow(line[8], line[8], type, line[4], line[4], line[5], line[6], line[7]);
                        }
                    }
                }
            }
            xmlHttp.send( null );
        }
    </script>
    <button type="button" onclick="httpGet()">test cmd</button>
</html>


